(this.webpackJsonpmeteo=this.webpackJsonpmeteo||[]).push([[0],{12:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(3),o=a.n(l),c=(a(12),a(2)),s=a.n(c),i=a(4),m=a(1);a(6);function u(e){var t="page-item";return e.isActive&&(t+=" active"),r.a.createElement("li",{className:t},r.a.createElement("button",{className:"page-link",href:"",onClick:function(t){e.handleClick(e.label)}},e.label))}function d(e){var t=e.children;return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("nav",{"aria-label":"..."},r.a.createElement("ul",{className:"pagination pagination-lg"},t)))}function p(e){var t=e.type,a=void 0===t?"border":t,n=e.color,l=void 0===n?"primary":n;return r.a.createElement("div",{className:"d-flex justify-content-center mt-4"},r.a.createElement("div",{className:"spinner-".concat(a," text-").concat(l),role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))}function v(e){var t=e.title,a=void 0===t||t,n=e.color,l=void 0===n?"danger":n,o=e.pContent,c=void 0===o?"Error":o,s=e.bottomContent,i=void 0===s?"La ville n'existe pas":s;return r.a.createElement("div",{className:"text-center alert alert-".concat(l),role:"alert"},a?r.a.createElement("h4",{className:"alert-heading"},"Error !"):"",r.a.createElement("p",null,c),r.a.createElement("hr",null),r.a.createElement("p",{className:"mb-0"},i))}function f(e){!1!==e&&void 0!==e||(e=new Date);var t=new Intl.DateTimeFormat("fr-FR",{weekday:"long"}).format(new Date(e));return t[0].toUpperCase()+t.slice(1)}function E(e){var t=e.meteo;e.activeDay;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mt-3"},r.a.createElement("img",{src:"https://openweathermap.org/themes/openweathermap/assets/vendor/owm/img/widgets/"+t.icon+".png",alt:t.description})),r.a.createElement("div",{className:"mt-3"},"Temps : ",t.description),r.a.createElement("div",{className:"mt-3"},"Temperature r\xe9el : ",t.temp," \xb0 C"),r.a.createElement("div",{className:"mt-3"},"Temp\xe9rature ressenti : ",t.feel," \xb0 C"),r.a.createElement("div",{className:"mt-3"},"Humidit\xe9 : ",t.humidity," %"),r.a.createElement("div",{className:"compass",style:{position:"relative"}},r.a.createElement("div",{className:"North"},"Nord ",r.a.createElement("div",null,"0")),r.a.createElement("div",{className:"West",style:{position:"absolute",top:"140px",left:"35%"}},"West ",r.a.createElement("div",null,"270")),r.a.createElement("div",{className:"East",style:{position:"absolute",top:"140px",left:"65%"}},"East ",r.a.createElement("div",null,"90")),r.a.createElement("div",{className:"mt-3",style:{transform:"rotate(".concat(parseFloat(t.windDirection)-90,"deg)"),height:"200px",position:"relative",top:"-50px"}},"Sens du vent : ",t.windDirection," degr\xe9s =>"),r.a.createElement("div",{className:"South",style:{position:"relative",top:"30px"}},"Sud ",r.a.createElement("div",null,"180"))))}var g="e184943229e3aef2a626130052103510";var h=function(){var e=f(),t=r.a.useState(e),a=Object(m.a)(t,2),n=a[0],l=a[1],o=r.a.useState(!1),c=Object(m.a)(o,2),h=c[0],b=c[1],y=r.a.useState("Bordeaux"),N=Object(m.a)(y,2),w=N[0],x=N[1],C=r.a.useState(null),S=Object(m.a)(C,2),j=S[0],k=S[1],D=r.a.useState({}),M=Object(m.a)(D,2),L=M[0],O=M[1];r.a.useEffect((function(){function e(){return(e=Object(i.a)(s.a.mark((function e(t){var a,n,r,l,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("CALL API 2"),a="http://api.openweathermap.org/data/2.5/forecast?q=".concat(t,"&units=").concat("metric","&appid=").concat(g,"&lang=fr"),e.next=4,fetch(a);case 4:return n=e.sent,console.log("meteoResponse",n),e.next=8,n.json();case 8:r=e.sent,console.log("bodyMeteoResponse",r),n.ok?(l=r.list.reduce((function(e,a){var n=f(a.dt_txt),r=a.weather[0].description[0].toUpperCase()+a.weather[0].description.slice(1);return e[n]||(e[n]=[]),e[n].push({city:t,weather:a.weather[0].main,description:r,temp:a.main.temp,icon:a.weather[0].icon,feel:a.main.feels_like,humidity:a.main.humidity,windDirection:a.wind.deg}),e}),{}),O(l),k(null)):(console.log(j),o={errorMessage:r.message},O(o),"city not found"===r.message?k({message:"La ville que vous recherchez n'as pas \xe9t\xe9 trouv\xe9 ou n'existe pas.",response:r.message}):k({response:r.message}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("api calling..."),function(t){e.apply(this,arguments)}(w)}),[w]),console.log("submittedCity",w),console.log("hasBeenSubmitted",h);var R=!j&&!L[n];console.log("loading ?",!j&&!L[n],"error ?",!j),console.log("error : ",j);var A=!R&&L[n];return console.log("activeDayMeteo",!R&&L[n],A),r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-success mb-4 mt-4"},"M\xe9t\xe9o")),r.a.createElement(d,null,function(e,t){for(var a=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],n=0;n<a.length;n++){var r=a[n];if("Lundi"===e)return a.slice(0,t);if("Mardi"===e)return console.log(n),a.slice(1,t+1);if(r===e){var l=a.slice(n),o=a.slice(0,t-l.length);return l.concat(o)}}}(e,5).map((function(e){return r.a.createElement(u,{label:e,isActive:n===e,handleClick:l})}))),r.a.createElement("h2",{className:"text-center"},"M\xe9t\xe9o de ",w),r.a.createElement("form",{action:"",onSubmit:function(e){e.preventDefault(),b(!0),x(e.target[0].value),console.log("Vous avez soumis : ",e.target[0].value)},className:"d-flex justify-content-center"},r.a.createElement("div",{className:"form-group mx-sm-2 mb-2"},r.a.createElement("input",{type:"text",placeholder:"Search..",className:"text-center"}),r.a.createElement("button",{type:"submit",className:"text-center btn btn-primary ml-2"},"Submit"))),R?r.a.createElement(p,{color:"dark",type:"grow"}):j?r.a.createElement(v,{title:!0,color:"warning",pContent:j.response,bottomContent:j.message}):r.a.createElement("div",{className:"text-center mt-3",style:{display:"flex",justifyContent:"space-evenly"}},A?A.map((function(e){return r.a.createElement("div",{className:"bg bg-secondary rounded",style:{width:"20%",border:"1px black solid"}},r.a.createElement(E,{meteo:e,activeDay:n}))})):r.a.createElement("div",null,"ERROR")))};a(14),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(h,null),document.getElementById("root"))},6:function(e,t,a){},7:function(e,t,a){e.exports=a(15)}},[[7,1,2]]]);
//# sourceMappingURL=main.0c2cf2e9.chunk.js.map